

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Functions &mdash; nanodiffraction 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Display" href="../display/displayAPI.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> nanodiffraction
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with the toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide/guide.html">Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geometry/geometry.html">Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mex/mex.html">Mex-functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../colormaps/colormaps.html">Colormaps</a></li>
</ul>
<p class="caption"><span class="caption-text">Toolbox functionality</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../files/files.html">Files module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nanodiffraction/nanodiffraction.html">Nanodiffraction module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../display/display.html">Display module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../functions/functions.html">External functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dependencies/dependencies.html">External dependencies</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../references/references.html">References</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../matlab.html">Matlab API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../files/filesAPI.html">Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nanodiffraction/nanodiffractionAPI.html">Nanodiffraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../display/displayAPI.html">Display</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Functions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nanodiffraction</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../matlab.html">Matlab API</a> &raquo;</li>
        
      <li>Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/matlab/functions/functionsAPI.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-functions">
<span id="functions"></span><span id="functionsapi"></span><h1>Functions<a class="headerlink" href="#module-functions" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="functions.pca">
<code class="descclassname">functions.</code><code class="descname">pca</code><span class="sig-paren">(</span><em>dat</em>, <em>qy</em>, <em>qz</em>, <em>mask</em>, <em>sel</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.pca" title="Permalink to this definition">¶</a></dt>
<dd><p>PCA calculates the covariance of the diffraction pattern and determines the eigenvalues of the scattering distribution</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">pca(data,</span> <span class="pre">qy,</span> <span class="pre">qz,</span> <span class="pre">mask,</span> <span class="pre">selection)</span></code></div></blockquote>
<p>In a principal component analysis of a scattering distribution, the covariance matrix of the distribution is calculated and orthogonalized.
The procedure is described in more detail in Bernhardt et al., 2016.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>numerical array</em>) – Diffraction pattern</li>
<li><strong>qy</strong> (<em>numerical array</em>) – Numerical array of the size of the input data that contains the horizontal momentum transfer</li>
<li><strong>qz</strong> (<em>numerical array</em>) – Numerical array of the size of the input data that contains the vertical momentum transfer</li>
<li><strong>mask</strong> (<em>logical array, default = []</em>) – Logical array of the size of the input data that defines which pixels are considered bad (1 = bad, 0 = valid)</li>
<li><strong>selection</strong> (<em>logical array, default = []</em>) – Logical array of the size of the input data that defines which pixels should be analyzed (1 = valid, 0 = invalid)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>result</strong> – Structure with the following fields:</p>
<ul class="simple">
<li>w: Anisotropy of the data</li>
<li>angle: Orientation of the first principal component. Note that 0 degrees is along the -y axis and the angle is defined counter-clockwise</li>
<li>lambda_1: Eigenvalue of the first principal component</li>
<li>lambda_2: Eigenvalue of the second principal component</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">structure</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Example 1:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="p">=</span> <span class="n">nanodiffraction</span><span class="p">();</span>
<span class="n">streak</span> <span class="p">=</span> <span class="n">e</span><span class="p">.</span><span class="n">simulate_streak</span><span class="p">();</span>
<span class="n">QY</span> <span class="p">=</span> <span class="p">;</span>
<span class="n">QZ</span> <span class="p">=</span> <span class="p">;</span>
<span class="n">pca_result</span> <span class="p">=</span> <span class="n">pca</span><span class="p">(</span><span class="n">streak</span><span class="p">,</span><span class="n">QY</span><span class="p">,</span><span class="n">QZ</span><span class="p">,[],[]);</span>
</pre></div>
</div>
<p>See also EIG</p>
</dd></dl>

<dl class="function">
<dt id="functions.stxm">
<code class="descclassname">functions.</code><code class="descname">stxm</code><span class="sig-paren">(</span><em>data</em>, <em>mask</em>, <em>sel</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.stxm" title="Permalink to this definition">¶</a></dt>
<dd><p>STXM  Integrated the intensity in a diffraction pattern or part of a diffraction pattern</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">stxm(data,mask,selection)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>two-dimensional numeric array</em>) – A diffraction pattern</li>
<li><strong>mask</strong> (<em>logical array, default = []</em>) – Logical array of the size of the input data that defines which pixels are considered bad (1 = bad, 0 = valid)</li>
<li><strong>selection</strong> (<em>logical array, default = []</em>) – Logical array of the size of the input data that defines which pixels should be analyzed (1 = valid, 0 = invalid)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> – The integrated intensity of data within a given selection and without masked pixels</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Double</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Example 1:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">stxm_result</span> <span class="p">=</span> <span class="n">stxm</span><span class="p">(</span><span class="n">data</span><span class="p">,[],[]);</span>
</pre></div>
</div>
<p>See also PCA</p>
</dd></dl>

<dl class="function">
<dt id="functions.baseline">
<code class="descclassname">functions.</code><code class="descname">baseline</code><span class="sig-paren">(</span><em>data</em>, <em>winSize</em>, <em>iterations</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.baseline" title="Permalink to this definition">¶</a></dt>
<dd><p>BASELINE  Iterative baseline identification using the strip algorithm as used in pyMCA, see Kieffer et al., 2014.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">=</span> <span class="pre">baseline(data,</span> <span class="pre">winSize,</span> <span class="pre">iterations)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>One-dimensional numeric array</em>) – Input data</li>
<li><strong>winSize</strong> (<em>integer</em>) – Integer value greater than 0, that defines the size of the filter window used for the strip algorithm.</li>
<li><strong>iterations</strong> (<em>integer</em>) – Integer value greater than 0, that defines the number of iterations.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>data</strong> – Baseline that can be used for background subtraction</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">One-dimensional numeric array</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Example 1:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>   <span class="p">=</span> <span class="n">split_struct</span><span class="p">(</span><span class="n">b1d</span><span class="p">(</span><span class="n">data</span><span class="p">,[],[],</span><span class="n">e</span><span class="p">.</span><span class="n">qr</span><span class="p">,</span><span class="mi">512</span><span class="p">),{</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">});</span>
<span class="n">bl</span>      <span class="p">=</span> <span class="n">baseline</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">e</span>       <span class="p">=</span> <span class="n">nanodiffraction</span><span class="p">();</span>
<span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>   <span class="p">=</span> <span class="n">split_struct</span><span class="p">(</span><span class="n">b1d</span><span class="p">(</span><span class="n">data</span><span class="p">,[],[],</span><span class="n">e</span><span class="p">.</span><span class="n">qr</span><span class="p">,</span><span class="mi">512</span><span class="p">),{</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">});</span>
<span class="n">bl</span>      <span class="p">=</span> <span class="n">baseline</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
<span class="n">bgr_2d</span>  <span class="p">=</span> <span class="n">e</span><span class="p">.</span><span class="n">azimuthal_spread</span><span class="p">(</span><span class="c">...);</span>
<span class="n">bgr_sub</span> <span class="p">=</span> <span class="n">data</span> <span class="o">-</span> <span class="n">bgr_2d</span><span class="p">;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="functions.autoc">
<code class="descclassname">functions.</code><code class="descname">autoc</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.autoc" title="Permalink to this definition">¶</a></dt>
<dd><p>AUTOC  estimates the contrast of an image to lie within the 5 and 95
percentile of an image. Data will be clipped to the according value</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">[DATA,LOW,HIGH]</span> <span class="pre">=</span> <span class="pre">AUTOC(DATA)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>Numeric array</em>) – Numeric array of any dimension</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>data</strong> (<em>Numeric array</em>) – Input data clipped at the lower and upper percentile</li>
<li><strong>low</strong> (<em>Floating-point number</em>) – Value of the lower (5%) percentile</li>
<li><strong>high</strong> (<em>Floating-point number</em>) – Value of the upper (95%) percentile</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Example 1:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="p">=</span> <span class="nb">magic</span><span class="p">(</span><span class="mi">256</span><span class="p">);</span>
<span class="p">[</span><span class="n">data_clipped</span><span class="p">,</span><span class="n">low</span><span class="p">,</span><span class="n">high</span><span class="p">]</span> <span class="p">=</span> <span class="n">autoc</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="functions.binning_2d">
<code class="descclassname">functions.</code><code class="descname">binning_2d</code><span class="sig-paren">(</span><em>image</em>, <em>binx</em>, <em>biny</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.binning_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>BINNING_2D  bins and image according to the binning
factors binx and biny.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">BINNED_IMAGE</span> <span class="pre">=</span> <span class="pre">BINNING_2D(IMAGE,</span> <span class="pre">BINX,</span> <span class="pre">BINY)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> (<em>Two-dimensional numeric array</em>) – Input image</li>
<li><strong>binx</strong> (<em>Integer</em>) – Integer binning factor along the horizontal dimension</li>
<li><strong>biny</strong> (<em>Integer</em>) – Integer binning factor along the vertical dimension</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>binned_image</strong> – Image binned by the binning factors binx and biny</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Two-dimensional numeric array</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Example 1:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">testimage</span> <span class="p">=</span> <span class="nb">magic</span><span class="p">(</span><span class="mi">256</span><span class="p">);</span>
<span class="n">binned_im</span> <span class="p">=</span> <span class="n">binning_2d</span><span class="p">(</span><span class="n">testimage</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="functions.dpc">
<code class="descclassname">functions.</code><code class="descname">dpc</code><span class="sig-paren">(</span><em>Mass</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.dpc" title="Permalink to this definition">¶</a></dt>
<dd><p>DPC calculates center of mass for an image</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">[dpcx,</span> <span class="pre">dpcy]</span> <span class="pre">=</span> <span class="pre">dpc(data)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>numerical array</em>) – Diffraction pattern</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>dpcx</strong> (<em>Floating-point number</em>) – center of mass along the horizontal dimension</li>
<li><strong>dpcy</strong> (<em>Floating-point number</em>) – center of mass along the vertical dimension</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="functions.get_index">
<code class="descclassname">functions.</code><code class="descname">get_index</code><span class="sig-paren">(</span><em>y</em>, <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.get_index" title="Permalink to this definition">¶</a></dt>
<dd><p>GET_INDEX  calculates the index of a data entry within the data array which is closest to a reference value</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">[I,X]</span> <span class="pre">=</span> <span class="pre">GET_INDEX(Y,VAL)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Y</strong> (<em>One-dimensional numerical array</em>) – Data array</li>
<li><strong>VAL</strong> (<em>Integer of floating-point value</em>) – Reference value</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>I</strong> (<em>Integer</em>) – Index within the search array Y</li>
<li><strong>X</strong> (<em>Integer of floating-point value</em>)</li>
<li><em>Value of the entry at position I in the search array Y</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Example 1:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="mi">100</span><span class="p">;</span>
<span class="p">[</span><span class="n">I</span><span class="p">,</span><span class="n">X</span><span class="p">]</span> <span class="p">=</span> <span class="n">get_index</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mf">22.7</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="functions.imla">
<code class="descclassname">functions.</code><code class="descname">imla</code><span class="sig-paren">(</span><em>dat</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.imla" title="Permalink to this definition">¶</a></dt>
<dd><p>IMLA Shows an intensity image on a logarithmic scale.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">imla(data)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>numerical array</em>) – Diffraction pattern</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>imla is a short-hand notation for <code class="docutils literal notranslate"><span class="pre">imagesc(log10(abs(dat)))</span></code></p>
</dd></dl>

<dl class="function">
<dt id="functions.split_struct">
<code class="descclassname">functions.</code><code class="descname">split_struct</code><span class="sig-paren">(</span><em>struct_name</em>, <em>arglist</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.split_struct" title="Permalink to this definition">¶</a></dt>
<dd><p>SPLIT_STRUCT  Returns each indicated field as a separate variable.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">split_struct(structure,</span> <span class="pre">cell_array_of_arguments)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>structure</strong> (<em>Structure</em>) – A structure that contains any number of fields. It can also be a nested structure</li>
<li><strong>cell_array_of_arguments</strong> (<em>Cell array</em>) – A cell array of field names. Each field name will be searched in the (possibly nested) structure.
If a field name was found in the structure, it is added to the output argument list.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Variable-length output argument list. The length of the list is given by the number of fields that matched a query field name.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Example 1:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">test_structure</span> <span class="p">=</span> <span class="n">struct</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="nb">magic</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span><span class="s">&#39;angle&#39;</span><span class="p">,</span><span class="nb">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">);</span>
<span class="p">[</span><span class="n">w</span><span class="p">,</span><span class="nb">angle</span><span class="p">]</span> <span class="p">=</span> <span class="n">split_struct</span><span class="p">(</span><span class="n">test_structure</span><span class="p">,{</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="s">&#39;angle&#39;</span><span class="p">});</span>
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">test_structure</span> <span class="p">=</span> <span class="n">struct</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="nb">magic</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span> <span class="s">&#39;angle&#39;</span><span class="p">,</span> <span class="nb">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">struct</span><span class="p">(</span><span class="s">&#39;power&#39;</span><span class="p">,</span> <span class="mi">2</span>^<span class="mi">3</span><span class="p">,</span> <span class="s">&#39;prime&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">));</span>
<span class="p">[</span><span class="n">w</span><span class="p">,</span><span class="nb">angle</span><span class="p">,</span><span class="n">prime</span><span class="p">]</span> <span class="p">=</span> <span class="n">split_struct</span><span class="p">(</span><span class="n">test_structure</span><span class="p">,{</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="s">&#39;angle&#39;</span><span class="p">,</span><span class="s">&#39;prime&#39;</span><span class="p">});</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="functions.symmetry">
<code class="descclassname">functions.</code><code class="descname">symmetry</code><span class="sig-paren">(</span><em>data</em>, <em>bgr</em>, <em>sigma</em>, <em>noise_level</em>, <em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.symmetry" title="Permalink to this definition">¶</a></dt>
<dd><p>SYMMETRY  identifies peaks in the image and determines whether n-fold
rotational symmetry exists.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">LN</span> <span class="pre">=</span> <span class="pre">SYMMETRY(DAT,BGR,SIGMA,NOISELEVEL,OBJ)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>Two-dimensional numeric array</em>) – Diffraction pattern</li>
<li><strong>bgr</strong> (<em>Two-dimensional numeric array</em>) – Background, that will be subtracted from diffraction pattern. bgr has to be of the same size as data</li>
<li><strong>sigma</strong> (<em>Integer or floating-point value</em>) – Width of Gaussian filter applied onto the data</li>
<li><strong>noiselevel</strong> (<em>Integer or floating-point value</em>) – SNR level that functions as a threshold for peak detection.</li>
<li><strong>obj</strong> (<em>Class handle</em>) – Handle to a nanodiffraction object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>Ln</em> – Description missing.</li>
<li><em>binCenter</em> – Description missing.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="functions.crystals">
<code class="descclassname">functions.</code><code class="descname">crystals</code><span class="sig-paren">(</span><em>data</em>, <em>mask</em>, <em>sel</em>, <em>threshold</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.crystals" title="Permalink to this definition">¶</a></dt>
<dd><p>CRYSTAL  Calculates the signal-to-noise ratio and calculates the integrated intensity for data above a given threshold</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">[result]</span> <span class="pre">=</span> <span class="pre">crystals(data,mask,sel,threshold)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>Two-dimensional numeric array</em>) – Diffraction pattern</li>
<li><strong>mask</strong> (<em>logical array, default = []</em>) – Logical array of the size of the input data that defines which pixels are considered bad (1 = bad, 0 = valid)</li>
<li><strong>selection</strong> (<em>logical array, default = []</em>) – Logical array of the size of the input data that defines which pixels should be analyzed (1 = valid, 0 = invalid)</li>
<li><strong>threshold</strong> (<em>numeric value</em>) – Data above which the scattered intensity should be integrated</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> – Integrated intensity of scattered intensity of all valid data points above the given threshold</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Numeric value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="functions.sort_scan">
<code class="descclassname">functions.</code><code class="descname">sort_scan</code><span class="sig-paren">(</span><em>data</em>, <em>rows</em>, <em>cols</em>, <em>varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.sort_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>SORT_SCAN  Reshapes a given one-dimensional or two-dimensional numerical array or cell array into the dimensions of the scan. In the case of a two-dimensional array, each column is treated independently and the result will be output as a stack of two-dimensional numerical arrays.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">out_array</span> <span class="pre">=</span> <span class="pre">sort_scan(data,rows,cols,scanmode)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>One- or two-dimensional numerical array or cell array</em>) – One-dimensional or two-dimensional numerical array. If the data is
two-dimensional, each column will be treated seperately and stored
in the third dimension of the output array, since the first
dimension of the input array will be expanded into the first two
dimensions of the output array. Input data can also be in form of a cell array.</li>
<li><strong>rows</strong> (<em>Integer</em>) – Number of scan lines</li>
<li><strong>cols</strong> (<em>Integer</em>) – Number of scan points per line</li>
<li><strong>scanmode</strong> (<em>Default = 'horz'</em>) – <p>Several raster scanning modes are possible, see ASCII art in the following code block:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">horizontal</span> <span class="o">&lt;</span><span class="n">horz</span><span class="o">&gt;</span>
   <span class="o">*==================</span><span class="p">=</span><span class="o">&gt;</span>
   <span class="o">====================&gt;</span>
   <span class="o">========&gt;</span><span class="c">...</span>
<span class="mi">2</span> <span class="n">horizontal</span><span class="p">,</span> <span class="n">alternating</span> <span class="o">&lt;</span><span class="n">horzalt</span><span class="o">&gt;</span>
   <span class="o">*==================</span><span class="p">=</span><span class="o">&gt;</span>
                       <span class="n">v</span>
   <span class="o">&lt;==================</span><span class="p">=</span><span class="o">&lt;</span>
   <span class="n">v</span>
<span class="mi">3</span> <span class="n">vertical</span> <span class="o">&lt;</span><span class="n">vert</span><span class="o">&gt;</span>
   <span class="o">*</span>  <span class="n">v</span>  <span class="n">v</span>  <span class="n">v</span>  <span class="n">v</span>
   <span class="n">v</span>  <span class="n">v</span>  <span class="n">v</span>  <span class="n">v</span>  <span class="p">.</span>
   <span class="n">v</span>  <span class="n">v</span>  <span class="n">v</span>  <span class="n">v</span>  <span class="p">.</span>
   <span class="n">v</span>  <span class="n">v</span>  <span class="n">v</span>  <span class="n">v</span>  <span class="p">.</span>
<span class="mi">4</span> <span class="n">vertical</span><span class="p">,</span><span class="n">alternating</span> <span class="o">&lt;</span><span class="n">vertalt</span><span class="o">&gt;</span>
   <span class="o">*</span>   <span class="n">A</span> <span class="o">&gt;</span> <span class="n">v</span>   <span class="n">A</span> <span class="o">&gt;</span> <span class="n">v</span>
   <span class="n">v</span>   <span class="n">A</span>   <span class="n">v</span>   <span class="n">A</span>   <span class="p">.</span>
   <span class="n">v</span>   <span class="n">A</span>   <span class="n">v</span>   <span class="n">A</span>   <span class="p">.</span>
   <span class="n">v</span> <span class="o">&gt;</span> <span class="n">A</span>   <span class="n">v</span> <span class="o">&gt;</span> <span class="n">A</span>   <span class="p">.</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out_array</strong> – Two- or three-dimensional numeric array. The first two dimensions are of the size of the scan dimensions.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Two- or three-dimensional numeric array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="functions.update_defaults">
<code class="descclassname">functions.</code><code class="descname">update_defaults</code><span class="sig-paren">(</span><em>defaults</em>, <em>opts</em><span class="sig-paren">)</span><a class="headerlink" href="#functions.update_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>UPDATE_DEFAULTS  overwrites values in a structure with given values from
a reference structure</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">config</span> <span class="pre">=</span> <span class="pre">update_defaults(defaults,opts)</span></code></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>defaults</strong> (<em>Structure</em>) – Structure containing default entries.</li>
<li><strong>opts</strong> (<em>Structure</em>) – Structure containing entries that should be used to overwrite
entries in the default structure.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>config</strong> – A structure that contains all fields from the default structure</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Structure</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Example 1:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="p">=</span> <span class="n">update_defaults</span><span class="p">(</span><span class="n">struct</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;test&#39;</span><span class="p">),</span><span class="n">struct</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;replaced&#39;</span><span class="p">));</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../display/displayAPI.html" class="btn btn-neutral float-left" title="Display" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Jan-David Nicolas

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>